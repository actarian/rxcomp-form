/**
 * @license rxcomp-form v1.0.0-alpha.6
 * (c) 2019 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("main",["rxcomp","rxjs/operators","rxjs"],e):e((t=t||self).rxcomp,t.rxjs.operators,t.rxjs)}(this,(function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var o=["untouched","touched","pristine","dirty","pending","enabled","disabled","valid","invalid"],s=function(n){function i(){return n.apply(this,arguments)||this}u(i,n);var r=i.prototype;return r.onInit=function(){var e=t.getContext(this).node;this.node=e,this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),e.addEventListener("input",this.onChange),e.addEventListener("change",this.onChange),e.addEventListener("blur",this.onBlur)},r.onChanges=function(n){var i=this,r=t.getContext(this).node,u=r.getAttributeNode("[name]").value,s=this.formGroup.get(u);s.value$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("Accessor.control.valueChanges$",t)})),s.status$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(t){var e=i.getPre(r);e.textContent="",o.forEach((function(t){s[t]?(r.classList.add(t),e.textContent+=t+", "):r.classList.remove(t)})),s.errors.forEach((function(t){return e.textContent+="invalid-"+t+", "}))})),this.writeValue(s.value)},r.writeValue=function(e){t.getContext(this).node.setAttribute("value",null==e?"":e)},r.setDisabledState=function(e){t.getContext(this).node.setAttribute("disabled",e)},r.getPre=function(t){var e=t.previousSibling;return e&&3===e.nodeType||(e=document.createTextNode(""),t.parentNode.insertBefore(e,t)),e},r.onChange=function(e){var n=t.getContext(this).node,i=n.getAttributeNode("[name]").value;this.formGroup.get(i).value=n.value},r.onFocus=function(t){},r.onBlur=function(e){var n=t.getContext(this).node.getAttributeNode("[name]").value;this.formGroup.get(n).touched=!0},i}(t.Component);s.meta={selector:"input,textarea,select",inputs:["formGroup"]};var a=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e}(t.Module),c=[s],h=[];a.meta={declarations:[].concat(c,h),exports:[].concat(c,h)};var l="valid",f="invalid",d="pending",p="disabled",v=function(){function t(t){void 0===t&&(t=[]),this.validators=t,this.errors=[]}var i=t.prototype;return i.initSubjects_=function(){this.valueSubject=new n.BehaviorSubject(null),this.valueChildren=new n.Subject,this.statusSubject=new n.BehaviorSubject(this),this.statusChildren=new n.Subject},i.initObservables_=function(){var t=this;this.value$=n.merge(this.valueSubject,this.valueChildren).pipe(e.distinctUntilChanged(),e.skip(1),e.tap((function(e){t.dirty_=!0,e===t.value&&t.statusSubject.next(t)})),e.shareReplay(1)),this.status$=n.merge(this.statusSubject,this.statusChildren).pipe(e.tap((function(e){t.reduceValidators_()})),e.shareReplay(1))},i.reduceValidators_=function(){return[]},i.validate=function(t){return this.status===p?this.errors=[]:(this.errors=this.validators.map((function(e){return e(t)})).filter((function(t){return null!==t})),this.status=0===this.errors.length?l:f),this.errors},r(t,[{key:"valid",get:function(){return this.status===l}},{key:"invalid",get:function(){return this.status===f}},{key:"pending",get:function(){return this.status===d}},{key:"disabled",get:function(){return this.status===p}},{key:"enabled",get:function(){return this.status!==p}},{key:"dirty",get:function(){return this.dirty_}},{key:"pristine",get:function(){return!this.dirty_}},{key:"touched",get:function(){return this.touched_},set:function(t){this.touched_=t,this.statusSubject.next(this)}},{key:"untouched",get:function(){return!this.touched_}},{key:"value",get:function(){return this.value_},set:function(t){this.value_=t,this.valueSubject.next(t)}}]),t}(),b=function(t){function e(e,n){var i;return void 0===e&&(e=null),(i=t.call(this,n)||this).value_=e,i.initSubjects_(),i.initObservables_(),i.statusSubject.next(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}return u(e,t),e.prototype.reduceValidators_=function(){return this.validate(this.value)},e}(v),g=function(t){function e(e,n){return void 0===e&&(e={}),t.call(this,e,n)||this}u(e,t);var n=e.prototype;return n.forEach_=function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))},n.get=function(t){return this.controls[t]},n.set=function(t,e){this.controls[e]=t},e}(function(t){function i(e,n){var i;return(i=t.call(this,n)||this).controls=e,i.initControls_(e),i.initSubjects_(),i.initObservables_(),i}u(i,t);var o=i.prototype;return o.initControl_=function(t){return t instanceof v?t:new b(t,this.validators)},o.initControls_=function(t){var e=this;return this.forEach_((function(t,n){e.set(e.initControl_(t),n)})),t},o.initSubjects_=function(){var t=this;this.valueSubject=new n.BehaviorSubject(null);var i=this.reduce_((function(t,e){return t.push(e.valueSubject),t}),[]);this.valueChildren=n.combineLatest(i).pipe(e.map((function(e){return t.value})),e.shareReplay(1)),this.statusSubject=new n.BehaviorSubject(this);var r=this.reduce_((function(t,e){return t.push(e.status$),t}),[]);this.statusChildren=n.combineLatest(r).pipe(e.shareReplay(1))},o.validate=function(t){if(this.status===p)this.errors=[];else{var e=this.validators.map((function(e){return e(t)})).filter((function(t){return null!==t}));e=this.reduce_((function(t,e){return t.concat(e.errors)}),e),this.status=0===this.errors.length?l:f}return this.errors},o.forEach_=function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))},o.reduce_=function(t,e){return this.forEach_((function(n,i){e=t(e,n,i)})),e},o.all_=function(t,e){return this.reduce_((function(n,i){return n&&i[t]===e}),!0)},o.any_=function(t,e){return this.reduce_((function(n,i){return n||i[t]===e}),!1)},o.get=function(t){return this.controls[t]},o.set=function(t,e){this.controls[e]=t},r(i,[{key:"touched",get:function(){return this.reduce_((function(t,e){return t&&e.touched}),!0)},set:function(t){this.forEach_((function(e){e.touched=t})),this.statusSubject.next(this)}},{key:"value",get:function(){return this.reduce_((function(t,e,n){return t[n]=e.value,t}),{})},set:function(t){}}]),i}(v));function y(t){return null==t||0===t.length?"required":null}var _=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){var t=this.group=new g({firstName:"Jhon",lastName:"Appleseed"},[y]);t.value$.subscribe((function(t){console.log("AppComponent.group.value$",t)})),t.status$.subscribe((function(){console.log("AppComponent.group.valid",t.valid)}))},e}(t.Component);_.meta={selector:"[app-component]"};var m=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e}(t.Module);m.meta={imports:[t.CoreModule,a],declarations:[],bootstrap:_},t.Browser.bootstrap(m)}));
//# sourceMappingURL=main.min.js.map