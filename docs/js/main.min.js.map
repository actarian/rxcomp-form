{"version":3,"sources":["docs/js/main.js","../../src/form/form-status.js","../../src/form/control-group.directive.js","../../src/form/form-accessor.js","../../src/form/form-group-accessor.js","../../src/form/submit.directive.js","../../src/form.module.js","../../src/form/form-abstract.js","../../src/form/form-control.js","../../src/form/form-group.js","../../src/form/form-abstract-collection.js","../../src/form/form-validators.js","../../test/js/app.component.js","../../test/js/app.module.js","../../test/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","rxjs","operators","this","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","FormStatus","FormAttributes","ControlGroupDirective","_Directive","apply","arguments","_proto","getFormRef","parentFormRef","controlGroupName","get","controlGroup","onChanges","changes","node","getContext","formRef","status$","pipe","takeUntil","unsubscribe$","subscribe","status","forEach","x","classList","add","remove","Directive","meta","selector","inputs","FormAccessor","formControlName","formControl","onInit","onChange","bind","onBlur","addEventListener","value$","value","writeValue","setAttribute","setDisabledState","disabled","event","onFocus","touched","getPre","pre","previousSibling","nodeType","document","createTextNode","parentNode","insertBefore","FormGroupAccessor","_Component","formGroupName","formGroup","Component","SubmitDirective","_getContext","parentInstance","replace","event$","fromEvent","tap","preventDefault","shareReplay","expression","getAttribute","outputFunction","makeFunction","resolve","join","FormModule","_Module","Module","factories","pipes","declarations","concat","FormAbstract","validators","errors","initSubjects_","valueSubject","BehaviorSubject","valueChildren","Subject","statusSubject","statusChildren","initObservables_","_this","merge","distinctUntilChanged","skip","dirty_","next","reduceValidators_","validate","map","filter","touched_","set","value_","FormControl","_FormAbstract","call","ReferenceError","_assertThisInitialized","FormGroup","_FormAbstractCollecti","controls","forEach_","callback","keys","control","FormAbstractCollection","initControls_","initControl_","_this2","_this3","reduce_","result","push","combineLatest","latest","_this4","all_","any_","RequiredValidator","AppComponent","form","firstName","lastName","values","onValidate","valid","onSubmit","AppModule","imports","CoreModule","bootstrap","makeInputs","instance","input","makeInput","hasAttribute","getInstance","window","context","getContextByNode","getParentInstance","traverseUp","Browser"],"mappings":"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","file":"docs/js/main.min.js","sourcesContent":[null,"const FormStatus = {\n\tValid: 'valid',\n\tInvalid: 'invalid',\n\tPending: 'pending',\n\tDisabled: 'disabled',\n};\n\nexport default FormStatus;\n\nexport const FormAttributes = ['untouched', 'touched', 'pristine', 'dirty', 'pending', 'enabled', 'disabled', 'valid', 'invalid'];\n","import { Directive, getContext } from 'rxcomp';\nimport { takeUntil } from 'rxjs/operators';\nimport { FormAttributes } from './form-status';\n\nexport default class ControlGroupDirective extends Directive {\n\n\tgetFormRef(parentFormRef) {\n\t\t// console.log('controlGroupName', this.controlGroupName, 'controlGroup', this.controlGroup, 'parentFormRef', parentFormRef);\n\t\treturn this.controlGroupName ? parentFormRef.get(this.controlGroupName) : this.controlGroup;\n\t}\n\n\tonChanges(changes) {\n\t\tconst { node } = getContext(this);\n\t\tconst formRef = this.getFormRef(changes.formRef);\n\t\tthis.formRef = formRef;\n\t\tformRef.status$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(status => {\n\t\t\tFormAttributes.forEach(x => {\n\t\t\t\tif (formRef[x]) {\n\t\t\t\t\tnode.classList.add(x);\n\t\t\t\t} else {\n\t\t\t\t\tnode.classList.remove(x);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n}\n\nControlGroupDirective.meta = {\n\tselector: '[[controlGroup]],[[controlGroupName]],[controlGroupName]',\n\tinputs: ['controlGroup', 'controlGroupName'],\n};\n","import { Directive, getContext } from 'rxcomp';\nimport { takeUntil } from 'rxjs/operators';\nimport { FormAttributes } from './form-status';\n\nexport default class FormAccessor extends Directive {\n\n\tgetFormRef(parentFormRef) {\n\t\t// console.log('formControlName', this.formControlName, 'formControl', this.formControl, 'parentFormRef', parentFormRef);\n\t\treturn this.formControlName ? parentFormRef.get(this.formControlName) : this.formControl;\n\t}\n\n\tonInit() {\n\t\tconst { node } = getContext(this);\n\t\tthis.node = node;\n\t\t// log(node.getAttributeNode('formControl').value);\n\t\t// log('name', node.name);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onBlur = this.onBlur.bind(this);\n\t\t// this.onFocus = this.onFocus.bind(this);\n\t\tnode.addEventListener('input', this.onChange);\n\t\tnode.addEventListener('change', this.onChange);\n\t\tnode.addEventListener('blur', this.onBlur);\n\t\t// node.addEventListener('focus', this.onFocus);\n\t}\n\n\tonChanges(changes) {\n\t\t// console.log('FormAccessor.onChanges', changes);\n\t\tconst { node } = getContext(this);\n\t\t// const key = node.getAttributeNode('[name]').value;\n\t\tconst formRef = this.getFormRef(changes.formRef);\n\t\t// changes.formRef = formRef;\n\t\tthis.formRef = formRef;\n\t\t// console.log('FormAccessor.formRef', formRef, 'changes', changes);\n\t\tformRef.value$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(value => {\n\t\t\t// console.log('Accessor.formRef.valueChanges$', value);\n\t\t});\n\t\tformRef.status$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe(status => {\n\t\t\t/*\n\t\t\tconst pre = this.getPre(node);\n\t\t\tpre.textContent = '';\n\t\t\t*/\n\t\t\tFormAttributes.forEach(x => {\n\t\t\t\tif (formRef[x]) {\n\t\t\t\t\tnode.classList.add(x);\n\t\t\t\t\t// pre.textContent += x + ', ';\n\t\t\t\t} else {\n\t\t\t\t\tnode.classList.remove(x);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// formRef.errors.forEach(x => pre.textContent += `invalid-${x}, `);\n\t\t});\n\t\tthis.writeValue(formRef.value);\n\t\t// node.value = 'test';\n\t}\n\n\twriteValue(value) {\n\t\tconst { node } = getContext(this);\n\t\tnode.setAttribute('value', value == null ? '' : value);\n\t}\n\n\tsetDisabledState(disabled) {\n\t\tconst { node } = getContext(this);\n\t\tnode.setAttribute('disabled', disabled);\n\t}\n\n\tonChange(event) {\n\t\tconst { node } = getContext(this);\n\t\t// log(event.type);\n\t\t// log('formRef', this.formRef);\n\t\tthis.formRef.value = node.value;\n\t}\n\n\tonFocus(event) {}\n\n\tonBlur(event) {\n\t\t// log(event.type);\n\t\t// log('formRef', this.formRef);\n\t\tthis.formRef.touched = true;\n\t}\n\n\tgetPre(node) {\n\t\tlet pre = node.previousSibling;\n\t\tif (!pre || pre.nodeType !== 3) {\n\t\t\tpre = document.createTextNode('');\n\t\t\tnode.parentNode.insertBefore(pre, node);\n\t\t}\n\t\treturn pre;\n\t}\n\n}\n\nFormAccessor.meta = {\n\tselector: 'input,textarea,select',\n\tinputs: ['formControl', 'formControlName'],\n};\n","import { Component } from 'rxcomp';\n\nexport default class FormGroupAccessor extends Component {\n\n\tgetFormRef(parentFormRef) {\n\t\t// console.log('formGroupName', this.formGroupName, 'formGroup', this.formGroup, 'parentFormRef', parentFormRef);\n\t\treturn this.formGroupName ? parentFormRef.get(this.formGroupName) : this.formGroup;\n\t}\n\n\tonChanges(changes) {\n\t\tconst formRef = this.getFormRef(changes.formRef);\n\t\t// changes.formRef = formRef;\n\t\tthis.formRef = formRef;\n\t\t// console.log('FormGroupAccessor.formRef', formRef);\n\t}\n\n}\n\nFormGroupAccessor.meta = {\n\tselector: '[[formGroup]],[[formGroupName]],[formGroupName]',\n\tinputs: ['formGroup', 'formGroupName'],\n};\n","import { Directive, getContext } from 'rxcomp';\nimport { fromEvent } from 'rxjs';\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\n\nconst EVENTS = ['submit'];\n\nexport default class SubmitDirective extends Directive {\n\n\tonInit() {\n\t\tconst { module, node, selector, parentInstance } = getContext(this);\n\t\tconst event = this.event = selector.replace(/\\[|\\]|\\(|\\)/g, '');\n\t\tconst event$ = this.event$ = fromEvent(node, event).pipe(\n\t\t\ttap(event => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// console.log('event');\n\t\t\t}),\n\t\t\tshareReplay(1)\n\t\t);\n\t\tconst expression = node.getAttribute(`(${event})`);\n\t\tif (expression) {\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\n\t\t\tevent$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe(event => {\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\n\t\t\t});\n\t\t} else {\n\t\t\tparentInstance[`${event}$`] = event$;\n\t\t}\n\t\t// console.log('parentInstance', parentInstance);\n\t\t// console.log('EventDirective.onInit', 'selector', selector, 'event', event);\n\t}\n\n}\n\nSubmitDirective.meta = {\n\tselector: `[(${EVENTS.join(')],[(')})]`,\n};\n","import { Module } from 'rxcomp';\nimport ControlGroupDirective from './form/control-group.directive';\nimport FormAccessor from './form/form-accessor';\nimport FormGroupAccessor from './form/form-group-accessor';\nimport SubmitDirective from './form/submit.directive';\n\nexport default class FormModule extends Module {}\nconst factories = [\n\tFormAccessor,\n\tFormGroupAccessor,\n\tControlGroupDirective,\n\tSubmitDirective,\n];\nconst pipes = [\n];\nFormModule.meta = {\n\tdeclarations: [\n\t\t...factories,\n\t\t...pipes,\n\t],\n\texports: [\n\t\t...factories,\n\t\t...pipes,\n\t]\n};\n","import { BehaviorSubject, merge, Subject } from \"rxjs\";\nimport { distinctUntilChanged, shareReplay, skip, tap } from 'rxjs/operators';\nimport FormStatus from './form-status';\n\nexport default class FormAbstract {\n\tconstructor(validators = []) {\n\t\tthis.validators = validators;\n\t\t// this.errors = {};\n\t\tthis.errors = [];\n\t}\n\n\tinitSubjects_() {\n\t\tthis.valueSubject = new BehaviorSubject(null);\n\t\tthis.valueChildren = new Subject();\n\t\tthis.statusSubject = new BehaviorSubject(this);\n\t\tthis.statusChildren = new Subject();\n\t}\n\n\tinitObservables_() {\n\t\tthis.value$ = merge(this.valueSubject, this.valueChildren).pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tskip(1),\n\t\t\ttap(value => {\n\t\t\t\tthis.dirty_ = true;\n\t\t\t\tif (value === this.value) {\n\t\t\t\t\tthis.statusSubject.next(this);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tshareReplay(1)\n\t\t);\n\t\tthis.status$ = merge(this.statusSubject, this.statusChildren).pipe(\n\t\t\t// auditTime(1),\n\t\t\ttap(status => {\n\t\t\t\tthis.reduceValidators_();\n\t\t\t}),\n\t\t\tshareReplay(1)\n\t\t);\n\t}\n\n\treduceValidators_() {\n\t\treturn [];\n\t}\n\n\tvalidate(value) {\n\t\tif (this.status === FormStatus.Disabled) {\n\t\t\t// this.errors = {};\n\t\t\tthis.errors = [];\n\t\t} else {\n\t\t\t// this.errors = Object.assign({}, ...this.validators.map(x => x(value)));\n\t\t\t// this.status = Object.keys(this.errors).length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t\tthis.errors = this.validators.map(x => x(value)).filter(x => x !== null);\n\t\t\tthis.status = this.errors.length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t}\n\t\treturn this.errors;\n\t}\n\n\tget valid() { return this.status === FormStatus.Valid; }\n\tget invalid() { return this.status === FormStatus.Invalid; }\n\tget pending() { return this.status === FormStatus.Pending; }\n\tget disabled() { return this.status === FormStatus.Disabled; }\n\tget enabled() { return this.status !== FormStatus.Disabled; }\n\tget dirty() { return this.dirty_; }\n\tget pristine() { return !this.dirty_; }\n\tget touched() { return this.touched_; }\n\tget untouched() { return !this.touched_; }\n\n\tset touched(touched) {\n\t\tthis.touched_ = touched;\n\t\tthis.statusSubject.next(this);\n\t}\n\n\tget value() { return this.value_; }\n\n\tset value(value) {\n\t\tthis.value_ = value;\n\t\tthis.valueSubject.next(value);\n\t}\n\n}\n","import FormAbstract from \"./form-abstract\";\n\nexport default class FormControl extends FormAbstract {\n\n\tconstructor(value = null, validators) {\n\t\tsuper(validators);\n\t\tthis.value_ = value;\n\t\tthis.initSubjects_();\n\t\tthis.initObservables_();\n\t\tthis.statusSubject.next(this);\n\t}\n\n\treduceValidators_() {\n\t\treturn this.validate(this.value);\n\t}\n\n}\n\nexport function formControl(value, validators) {\n\treturn new FormControl(value, validators);\n}\n","import FormAbstractCollection from './form-abstract-collection';\n\nexport default class FormGroup extends FormAbstractCollection {\n\n\tconstructor(controls = {}, validators) {\n\t\tsuper(controls, validators);\n\t}\n\n\tforEach_(callback) {\n\t\tObject.keys(this.controls).forEach(key => callback(this.controls[key], key));\n\t}\n\n\tget(key) {\n\t\treturn this.controls[key];\n\t}\n\n\tset(control, key) {\n\t\tthis.controls[key] = control;\n\t}\n\n}\n\nexport function formGroup(controls, validators) {\n\treturn new FormGroup(controls, validators);\n}\n","import { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport FormAbstract from './form-abstract';\nimport FormControl from './form-control';\nimport FormStatus from './form-status';\n\nexport default class FormAbstractCollection extends FormAbstract {\n\n\tconstructor(controls, validators) {\n\t\tsuper(validators);\n\t\tthis.controls = controls;\n\t\tthis.initControls_(controls);\n\t\tthis.initSubjects_();\n\t\tthis.initObservables_();\n\t\t// this.statusSubject.next(this);\n\t}\n\n\tinitControl_(control) {\n\t\treturn control instanceof FormAbstract ? control : new FormControl(control, this.validators);\n\t}\n\n\tinitControls_(controls) {\n\t\tthis.forEach_((control, key) => {\n\t\t\tthis.set(this.initControl_(control), key);\n\t\t});\n\t\treturn controls;\n\t}\n\n\tinitSubjects_() {\n\t\tthis.valueSubject = new BehaviorSubject(null);\n\t\tconst valueChildren = this.reduce_((result, control) => {\n\t\t\tresult.push(control.valueSubject);\n\t\t\treturn result;\n\t\t}, []);\n\t\tthis.valueChildren = combineLatest(valueChildren).pipe(\n\t\t\tmap(latest => this.value),\n\t\t\t// distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b)),\n\t\t\t// this.dirty_ = this.any_('dirty_', true);\n\t\t\t/*\n\t\t\tmap(merged => {\n\t\t\t\tconst values = {};\n\t\t\t\tObject.keys(this.controls).forEach((key, i) => {\n\t\t\t\t\tvalues[key] = merged[i] || null;\n\t\t\t\t});\n\t\t\t\treturn values;\n\t\t\t}),\n\t\t\ttap(value => {\n\t\t\t\tthis.dirty_ = true;\n\t\t\t\tthis.statusSubject.next(this);\n\t\t\t}),\n\t\t\t*/\n\t\t\tshareReplay(1)\n\t\t);\n\t\tthis.statusSubject = new BehaviorSubject(this);\n\t\tconst statusChildren = this.reduce_((result, control) => {\n\t\t\tresult.push(control.status$);\n\t\t\treturn result;\n\t\t}, []);\n\t\tthis.statusChildren = combineLatest(statusChildren).pipe(\n\t\t\t/*\n\t\t\ttap(controls => {\n\t\t\t\tthis.dirty_ = this.any_('dirty_', true);\n\t\t\t}),\n\t\t\t*/\n\t\t\tshareReplay(1)\n\t\t);\n\t}\n\n\tvalidate(value) {\n\t\tif (this.status === FormStatus.Disabled) {\n\t\t\t// this.errors = {};\n\t\t\tthis.errors = [];\n\t\t} else {\n\t\t\t// this.errors = Object.assign({}, ...this.validators.map(x => x(value)));\n\t\t\t// this.status = Object.keys(this.errors).length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t\tlet errors = this.validators.map(x => x(value)).filter(x => x !== null);\n\t\t\terrors = this.reduce_((result, control) => {\n\t\t\t\treturn result.concat(control.errors);\n\t\t\t}, errors);\n\t\t\tthis.status = this.errors.length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t}\n\t\treturn this.errors;\n\t}\n\n\tforEach_(callback) {\n\t\tObject.keys(this.controls).forEach(key => callback(this.controls[key], key));\n\t}\n\n\treduce_(callback, result) {\n\t\tthis.forEach_((control, key) => {\n\t\t\tresult = callback(result, control, key);\n\t\t});\n\t\treturn result;\n\t}\n\n\tall_(key, value) {\n\t\treturn this.reduce_((result, control) => {\n\t\t\treturn result && control[key] === value;\n\t\t}, true);\n\t}\n\n\tany_(key, value) {\n\t\treturn this.reduce_((result, control) => {\n\t\t\treturn result || control[key] === value;\n\t\t}, false);\n\t}\n\n\tget(key) {\n\t\treturn this.controls[key];\n\t}\n\n\tset(control, key) {\n\t\tthis.controls[key] = control;\n\t}\n\n\tget touched() {\n\t\treturn this.reduce_((result, control) => {\n\t\t\treturn result && control.touched;\n\t\t}, true);\n\t}\n\n\tset touched(touched) {\n\t\t// this.touched_ = touched;\n\t\tthis.forEach_(control => {\n\t\t\tcontrol.touched = touched;\n\t\t});\n\t\tthis.statusSubject.next(this);\n\t}\n\n\tget value() {\n\t\treturn this.reduce_((result, control, key) => {\n\t\t\tresult[key] = control.value;\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\tset value(value) {}\n\n}\n","export function RequiredValidator(value) {\n\t// return (value == null || value.length === 0) ? { required: true } : null;\n\treturn (value == null || value.length === 0) ? 'required' : null;\n}\n","import { Component } from 'rxcomp';\nimport { FormGroup, RequiredValidator } from '../../src/rxcomp-form';\n\nexport default class AppComponent extends Component {\n\n\tonInit() {\n\t\tconst form = this.form = new FormGroup({\n\t\t\tfirstName: 'Jhon',\n\t\t\tlastName: 'Appleseed',\n\t\t}, [RequiredValidator]);\n\n\t\tform.value$.subscribe(values => {\n\t\t\t// console.log('AppComponent.form.value$', values);\n\t\t});\n\n\t\tform.status$.subscribe(() => {\n\t\t\t// console.log('AppComponent.form.status$');\n\t\t\t// console.log('AppComponent.form.valid', form.valid);\n\t\t});\n\t}\n\n\tonValidate() {\n\t\t// console.log('AppComponent.onValidate', this.form.valid);\n\t\treturn this.form.valid;\n\t}\n\n\tonSubmit() {\n\t\t// console.log('AppComponent.onSubmit', this.form.value);\n\t}\n\n}\n\nAppComponent.meta = {\n\tselector: '[app-component]',\n};\n","import { CoreModule, Module } from 'rxcomp';\nimport { FormModule } from '../../src/rxcomp-form';\nimport AppComponent from './app.component';\n\nexport default class AppModule extends Module {}\n\nAppModule.meta = {\n\timports: [\n\t\tCoreModule,\n\t\tFormModule\n\t],\n\t// declarations: [],\n\tbootstrap: AppComponent,\n};\n","import { Browser, getContext, getContextByNode, Module } from 'rxcomp';\nimport AppModule from './app.module';\n\n// fixing\nModule.prototype.makeInputs = function(meta, instance) {\n\tconst inputs = {};\n\tif (meta.inputs) {\n\t\tmeta.inputs.forEach((key, i) => {\n\t\t\tconst input = this.makeInput(instance, key);\n\t\t\tif (input) {\n\t\t\t\tinputs[key] = input;\n\t\t\t}\n\t\t});\n\t}\n\treturn inputs;\n};\n\n// fixing\nModule.prototype.makeInput = function(instance, key) {\n\tconst { node } = getContext(instance);\n\tlet input, expression = null;\n\tif (node.hasAttribute(key)) {\n\t\texpression = `'${node.getAttribute(key)}'`;\n\t} else if (node.hasAttribute(`[${key}]`)) {\n\t\texpression = node.getAttribute(`[${key}]`);\n\t}\n\tif (expression !== null) {\n\t\tinput = this.makeFunction(expression);\n\t}\n\treturn input;\n};\n\n// fixing\nModule.prototype.getInstance = function(node) {\n\tif (node === document) {\n\t\treturn window;\n\t}\n\tconst context = getContextByNode(node); // !!!\n\tif (context) {\n\t\treturn context.instance;\n\t}\n};\n\n// fixing\nModule.prototype.getParentInstance = function(node) {\n\treturn Module.traverseUp(node, (node) => {\n\t\treturn this.getInstance(node);\n\t});\n};\n\nBrowser.bootstrap(AppModule);\n"]}