{"version":3,"sources":["src/rxcomp-form.ts","../../src/form/directives/form-abstract-collection.directive.ts","../../src/form/directives/form-array.directive.ts","../../src/form/directives/form-abstract.directive.ts","../../src/form/directives/form-checkbox.directive.ts","../../src/form/directives/form-field.component.ts","../../src/form/directives/form-group.directive.ts","../../src/form/directives/form-input.directive.ts","../../src/form/directives/form-placeholder.directive.ts","../../src/form/directives/form-radio.directive.ts","../../src/form/directives/form-select.directive.ts","../../src/form/directives/form-submit.directive.ts","../../src/form/validators/form-validator.ts","../../src/form/validators/validators.ts","../../src/form/validators/form-email.directive.ts","../../src/form/validators/form-max-length.directive.ts","../../src/form/validators/form-max.directive.ts","../../src/form/validators/form-min-length.directive.ts","../../src/form/validators/form-min.directive.ts","../../src/form/validators/form-pattern.directive.ts","../../src/form/validators/form-required-true.directive.ts","../../src/form/validators/form-required.directive.ts","../../src/form.module.ts","../../src/form/models/form-status.ts","../../src/form/form-abstract.ts","../../src/form/form-control.ts","../../src/form/form-abstract-collection.ts","../../src/form/form-array.ts","../../src/form/form-group.ts"],"names":["this","rxcomp","form","exports","rxjs","operators","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","FormAbstractCollectionDirective","_Directive","apply","arguments","onChanges","changes","node","getContext","flags","control","keys","forEach","classList","add","remove","get","Directive","selector","hosts","host","FormArrayDirective","_FormAbstractCollecti","formArray","formArrayName","inputs","FormAbstractDirective","_proto","onInit","onChange","bind","onBlur","addEventListener","formControlName","name","writeValue","value","event","touched","setDisabledState","disabled","formControl","FormCheckboxDirective","_FormAbstractDirectiv","setAttribute","removeAttribute","checked","FormFieldComponent","_Component","formField","formFieldName","Component","FormGroupDirective","formGroup","formGroupName","FormInputDirective","FormPlaceholderDirective","placeholder","FormRadioDirective","FormSelectDirective","FormSubmitDirective","_getContext","module","parentInstance","replace","event$","fromEvent","pipe","tap","preventDefault","shareReplay","expression","getAttribute","outputFunction","makeFunction","takeUntil","unsubscribe$","subscribe","resolve","FormValidator","validator","params","params$","BehaviorSubject","validate","getValue","set","current","reduce","flag","next","NullValidator","RequiredValidator","required","RequiredTrueValidator","MinValidator","min","parseFloat","isNaN","actual","MaxValidator","max","MinLengthValidator","minlength","requiredLength","actualLength","MaxLengthValidator","maxlength","PatternValidator","pattern","regex","RegExp","charAt","patternToRegEx","test","requiredPattern","toString","actualValue","EmailValidator","email","validators","freeze","FormEmailDirective","addValidators","FormMaxLengthDirective","_this","Number","POSITIVE_INFINITY","FormMaxDirective","FormMinLengthDirective","NEGATIVE_INFINITY","FormMinDirective","FormPatternDirective","FormRequiredTrueDirective","FormRequiredDirective","FormStatus","factories","pipes","FormModule","_Module","Module","declarations","concat","FormStatus$1","FormAbstract","value_","undefined","submitted_","touched_","dirty_","valueSubject","statusSubject","validatorsSubject","ReplaySubject","switchAll","value$","distinctUntilChanged","skip","status$","merge","switchMap","validate$","changes$","map","auditTime","Array","isArray","initSubjects_","switchValidators_","validatorParams","x","validatorParams$","combineLatest","of","initObservables_","_this2","status","Disabled","Hidden","errors","Invalid","Valid","result$","isObservable","results","assign","reset","Pending","patch","_this$validators","push","replaceValidators","_len","clearValidators","hidden","submitted","untouched","pristine","dirty","pending","enabled","visible","valid","invalid","FormControl","_FormAbstract","call","FormAbstractCollection","controls","changesChildren","initControls_","initControl_","controlOrValue","forEach_","init","switchSubjects_","reduce_","result","changesChildren$","_this3","errors_","filter","callback","_this4","all_","any_","_this5","find","removeKey","exhist","_len2","FormArray","Math","splice","insert","indexOf","at","FormGroup","Validators"],"mappings":"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","file":"dist/iife/rxcomp.min.js","sourcesContent":[null,"import { Directive, Factory, getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstractCollection from '../form-abstract-collection';\n\n/**\n * Abstract class representing a FormAbstractCollectionDirective.\n */\nexport default class FormAbstractCollectionDirective extends Directive {\n\n\tget control(): FormAbstractCollection {\n\t\t// !!! return null?\n\t\treturn {} as FormAbstractCollection;\n\t}\n\n\tonChanges(changes: Factory | Window) {\n\t\tconst { node } = getContext(this);\n\t\tconst flags = this.control.flags;\n\t\tObject.keys(flags).forEach((key: string) => {\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\n\t\t});\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '', // no selection, abstract class\n\t\thosts: { host: FormAbstractCollectionDirective },\n\t};\n\n}\n\n","import { IFactoryMeta } from 'rxcomp';\nimport FormArray from '../form-array';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\n\n/**\n * FormArrayDirective.\n * @example\n * <form [formArray]=\"form\" (submit)=\"onSubmit()\" role=\"form\" novalidate autocomplete=\"off\">\n * \t...\n * </form>\n */\nexport default class FormArrayDirective extends FormAbstractCollectionDirective {\n\n    formArrayName?: string;\n    formArray?: FormArray;\n    host?: FormAbstractCollectionDirective;\n\n    get control(): FormArray {\n        // console.log('FormArrayDirective', (this.formArrayName ? `formArrayName ${this.formArrayName}` : `formArray ${this.formArray}`));\n        if (this.formArray) {\n            return this.formArray;\n        } else {\n            if (!this.host) {\n                throw ('missing form collection');\n            }\n            // !!! check instanceof ?\n            return this.host.control.get(this.formArrayName) as FormArray;\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[formArray],[formArrayName]',\n        inputs: ['formArray', 'formArrayName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n\n","import { Directive, Factory, getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstract from '../form-abstract';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\n\n/**\n * Abstract class representing a FormAbstractDirective.\n */\nexport default class FormAbstractDirective extends Directive {\n\n\tformControlName?: string;\n\tformControl?: FormAbstract;\n\thost?: FormAbstractCollectionDirective;\n\n\tget control(): FormAbstract {\n\t\tif (this.formControl) {\n\t\t\treturn this.formControl;\n\t\t} else {\n\t\t\tif (!this.host) {\n\t\t\t\tthrow ('missing form collection');\n\t\t\t}\n\t\t\treturn this.host.control.get(this.formControlName);\n\t\t}\n\t}\n\n\tonInit() {\n\t\tconst node = getContext(this).node as HTMLInputElement;\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onBlur = this.onBlur.bind(this);\n\t\t// this.onFocus = this.onFocus.bind(this);\n\t\tnode.addEventListener('input', this.onChange);\n\t\tnode.addEventListener('change', this.onChange);\n\t\tnode.addEventListener('blur', this.onBlur);\n\t\t// node.addEventListener('focus', this.onFocus);\n\t}\n\n\tonChanges(changes: Factory | Window) {\n\t\tconst node = getContext(this).node as HTMLInputElement;\n\t\tif (this.formControlName) {\n\t\t\tnode.name = this.formControlName;\n\t\t}\n\t\t/*\n\t\t// remove all invalids then\n\t\tObject.keys(control.errors).forEach(key => {\n\t\t\tnode.classList.add(`invalid-${key}`);\n\t\t});\n\t\t*/\n\t\tconst control = this.control;\n\t\tconst flags = control.flags;\n\t\tObject.keys(flags).forEach((key: string) => {\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\n\t\t});\n\t\tthis.writeValue(control.value);\n\t}\n\n\twriteValue(value: any) {\n\t\tconst node = getContext(this).node as HTMLInputElement;\n\t\t// node.setAttribute('value', value == null ? '' : value);\n\t\tnode.value = value == null ? '' : value;\n\t}\n\n\tonChange(event: Event) {\n\t\tconst node = getContext(this).node as HTMLInputElement;\n\t\tthis.control.value = node.value === '' ? null : node.value;\n\t}\n\n\tonBlur(event: FocusEvent) {\n\t\tthis.control.touched = true;\n\t}\n\n\t// onFocus(event) {}\n\n\tsetDisabledState(disabled: boolean) {\n\t\tconst node = getContext(this).node as HTMLInputElement;\n\t\tnode.disabled = disabled;\n\t\t// node.setAttribute('disabled', disabled);\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '', // no selection, abstract class\n\t\tinputs: ['formControl', 'formControlName', 'value'],\n\t\thosts: { host: FormAbstractCollectionDirective },\n\t};\n\n}\n\n/*\n\nLEGACY\nbutton: \t\tA push button with no default behavior.\ncheckbox: \t\tA check box allowing single values to be selected/deselected.\nfile: \t\t\tA control that lets the user select a file. Use the accept attribute to define the types of files that the control can select.\nhidden: \t\tA control that is not displayed but whose value is submitted to the server.\nimage: \t\t\tA graphical submit button. You must use the src attribute to define the source of the image and the alt attribute to define alternative text. You can use the height and width attributes to define the size of the image in pixels.\npassword: \t\tA single-line text field whose value is obscured. Use the maxlength and minlength attributes to specify the maximum length of the value that can be entered.\n\t\t\t\tNote: Any forms involving sensitive information like passwords (e.g. login forms) should be served over HTTPS;\n\t\t\t\tFirefox now implements multiple mechanisms to warn against insecure login forms — see Insecure passwords.\n\t\t\t\tOther browsers are also implementing similar mechanisms.\n\nradio: \t\t\tA radio button, allowing a single value to be selected out of multiple choices.\nreset: \t\t\tA button that resets the contents of the form to default values.\nsubmit: \t\tA button that submits the form.\ntext: \t\t\tA single-line text field. Line-breaks are automatically removed from the input value.\n\n*/\n\n/*\n\nHTML5\ncolor: \t\t\t(ie) A control for specifying a color. A color picker's UI has no required features other than accepting simple colors as text (more info).\ndate: \t\t\t(ie) A control for entering a date (year, month, and day, with no time).\ndatetime-local: (ie) A control for entering a date and time, with no time zone.\nemail: \t\t\tA field for editing an e-mail address.\nmonth: \t\t\t(ie) A control for entering a month and year, with no time zone.\nnumber: \t\tA control for entering a number.\nrange: \t\t\tA control for entering a number whose exact value is not important.\nsearch: \t\tA single-line text field for entering search strings. Line-breaks are automatically removed from the input value.\ntel: \t\t\tA control for entering a telephone number.\ntime: \t\t\t(ie) A control for entering a time value with no time zone.\nurl: \t\t\tA field for entering a URL.\nweek: \t\t\t(ie) A control for entering a date consisting of a week-year number and a week number with no time zone.\n\n*/\n\n/*\n\nATTRIBUTES\nautocomplete\tA string indicating the type of autocomplete functionality, if any, to allow on the input\nautofocus\t\tA Boolean which, if present, makes the input take focus when the form is presented\ndisabled\t\tA Boolean attribute which is present if the input should be disabled\nform\t\t\tThe id of the <form> of which the input is a member; if absent, the input is a member of the nearest containing form, or is not a member of a form at all\nlist\t\t\tThe id of a <datalist> element that provides a list of suggested values for the input\nname\t\t\tThe input's name, to identify the input in the data submitted with the form's data\nreadonly\t\tA Boolean attribute which, if true, indicates that the input cannot be edited\nrequired\t\tA Boolean which, if true, indicates that the input must have a value before the form can be submitted\ntabindex\t\tA numeric value providing guidance to the user agent as to the order in which controls receive focus when the user presses the Tab key\ntype\t\t\tA string indicating which input type the <input> element represents\nvalue\t\t\tThe input's current value\n\n*/\n","import { getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\nimport FormAbstractDirective from './form-abstract.directive';\n\n/**\n * FormCheckboxDirective.\n * @example\n * <input type=\"checkbox\" formControlName=\"privacy\" [value]=\"true\" requiredTrue />\n * @example\n * <input type=\"checkbox\" [formControl]=\"control\" [value]=\"true\" requiredTrue />\n */\nexport default class FormCheckboxDirective extends FormAbstractDirective {\n\n    value?: any;\n\n    onInit() {\n        const node = getContext(this).node as HTMLInputElement;\n        // log(node.getAttributeNode('formControl').value);\n        // log('name', node.name);\n        this.onChange = this.onChange.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        // this.onFocus = this.onFocus.bind(this);\n        node.addEventListener('input', this.onChange);\n        // node.addEventListener('change', this.onChange);\n        node.addEventListener('blur', this.onBlur);\n        // node.addEventListener('focus', this.onFocus);\n    }\n\n    writeValue(value: any) {\n        const node = getContext(this).node as HTMLInputElement;\n        value === this.value ? node.setAttribute('checked', value) : node.removeAttribute('checked');\n\t\t/*\n\t\tconst checked = (node.value === value);\n\t\tif (node.checked !== checked) {\n\t\t\tnode.checked = checked;\n\t\t}\n\t\t*/\n    }\n\n    setDisabledState(disabled: boolean) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.disabled = disabled;\n    }\n\n    onChange(event: Event) {\n        const node = getContext(this).node as HTMLInputElement;\n        this.control.value = node.checked ? this.value : (this.value === true ? false : null);\n    }\n\n    onBlur(event: FocusEvent) {\n        this.control.touched = true;\n    }\n\n    // onFocus(event) {}\n\n    static meta: IFactoryMeta = {\n        selector: 'input[type=checkbox][formControl],input[type=checkbox][formControlName]',\n        inputs: ['formControl', 'formControlName', 'value'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n\n/*\n\nATTRIBUTES\nautocomplete\tA string indicating the type of autocomplete functionality, if any, to allow on the input\nautofocus\t\tA Boolean which, if present, makes the input take focus when the form is presented\ndisabled\t\tA Boolean attribute which is present if the input should be disabled\nform\t\t\tThe id of the <form> of which the input is a member; if absent, the input is a member of the nearest containing form, or is not a member of a form at all\nlist\t\t\tThe id of a <datalist> element that provides a list of suggested values for the input\nname\t\t\tThe input's name, to identify the input in the data submitted with the form's data\nreadonly\t\tA Boolean attribute which, if true, indicates that the input cannot be edited\nrequired\t\tA Boolean which, if true, indicates that the input must have a value before the form can be submitted\ntabindex\t\tA numeric value providing guidance to the user agent as to the order in which controls receive focus when the user presses the Tab key\ntype\t\t\tA string indicating which input type the <input> element represents\nvalue\t\t\tThe input's current value\n\n*/\n","import { Component, Factory, getContext, IFactoryMeta } from \"rxcomp\";\nimport FormAbstract from \"../form-abstract\";\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\n\n/**\n * FormFieldComponent.\n * @example\n * <div formFieldName=\"firstName\">\n *\t<input type=\"text\" [formControl]=\"control\" />\n * </div>\n */\nexport default class FormFieldComponent extends Component {\n\n    formFieldName?: string;\n    formField?: FormAbstract;\n    host?: FormAbstractCollectionDirective;\n\n    get control(): FormAbstract {\n        // console.log('FormFieldComponent', (this.formFieldName ? `formFieldName ${this.formFieldName}` : `formField ${this.formField}`));\n        if (this.formField) {\n            return this.formField;\n        } else {\n            if (!this.host) {\n                throw ('missing form collection');\n            }\n            return this.host.control.get(this.formFieldName);\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        const { node } = getContext(this);\n        const flags = this.control.flags;\n        Object.keys(flags).forEach((key: string) => {\n            flags[key] ? node.classList.add(key) : node.classList.remove(key);\n        });\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[formField],[formFieldName]',\n        inputs: ['formField', 'formFieldName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n","import { IFactoryMeta } from 'rxcomp';\nimport FormGroup from '../form-group';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\n\n/**\n * FormGroupDirective.\n * @example\n * <form [formGroup]=\"form\" (submit)=\"onSubmit()\" role=\"form\" novalidate autocomplete=\"off\">\n * \t...\n * </form>\n */\nexport default class FormGroupDirective extends FormAbstractCollectionDirective {\n\n    formGroupName?: string;\n    formGroup?: FormGroup;\n    host?: FormAbstractCollectionDirective;\n\n    get control() {\n        // console.log('FormGroupDirective', (this.formGroupName ? `formGroupName ${this.formGroupName}` : `formGroup ${this.formGroup}`));\n        if (this.formGroup) {\n            return this.formGroup;\n        } else {\n            if (!this.host) {\n                throw ('missing form collection');\n            }\n            // !!! check instanceof ?\n            return this.host.control.get(this.formGroupName) as FormGroup;\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[formGroup],[formGroupName]',\n        inputs: ['formGroup', 'formGroupName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n","import { getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\nimport FormAbstractDirective from './form-abstract.directive';\n\n/**\n * FormInputDirective to handle input text FormControl value.\n * @example\n * <input type=\"text\" formControlName=\"firstName\" />\n * @example\n * <input type=\"text\" [formControl]=\"form.get('firstName')\" />\n */\nexport default class FormInputDirective extends FormAbstractDirective {\n\n    writeValue(value: any): void {\n        const node = getContext(this).node as HTMLInputElement;\n        node.value = value == null ? '' : value;\n    }\n\n    onChange(event: Event): void {\n        const node = getContext(this).node as HTMLInputElement;\n        this.control.value = node.value === '' ? null : node.value;\n    }\n\n    onBlur(event: FocusEvent): void {\n        this.control.touched = true;\n    }\n\n    static meta: IFactoryMeta = {\n        selector: 'input[type=text][formControl],input[type=text][formControlName],input[type=email][formControl],input[type=email][formControlName],input[type=password][formControl],input[type=password][formControlName],textarea[formControl],textarea[formControlName]',\n        inputs: ['formControl', 'formControlName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n","import { Directive, Factory, getContext, IFactoryMeta } from 'rxcomp';\n\n/**\n * FormPlaceholderDirective.\n * @example\n * <input type=\"text\" [placeholder]=\"'item-' + index\" />\n */\nexport default class FormPlaceholderDirective extends Directive {\n\n    placeholder?: string;\n\n    onChanges(changes: Factory | Window) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.setAttribute('placeholder', this.placeholder || '');\n    }\n\n    static meta: IFactoryMeta = {\n        selector: 'input[placeholder],textarea[placeholder]',\n        inputs: ['placeholder'],\n    };\n\n}\n","import { getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\nimport FormAbstractDirective from './form-abstract.directive';\n\n/**\n * FormRadioDirective.\n * @example\n * <input type=\"radio\" [formControl]=\"control\" name=\"radioGroup\" value=\"one\" />\n * <input type=\"radio\" [formControl]=\"control\" name=\"radioGroup\" value=\"two\" />\n * <input type=\"radio\" [formControl]=\"control\" name=\"radioGroup\" value=\"three\" />\n */\nexport default class FormRadioDirective extends FormAbstractDirective {\n\n    onInit() {\n        const node = getContext(this).node as HTMLInputElement;\n        // log(node.getAttributeNode('formControl').value);\n        // log('name', node.name);\n        this.onChange = this.onChange.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        // this.onFocus = this.onFocus.bind(this);\n        node.addEventListener('input', this.onChange);\n        // node.addEventListener('change', this.onChange);\n        node.addEventListener('blur', this.onBlur);\n        // node.addEventListener('focus', this.onFocus);\n    }\n\n    writeValue(value: any) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.checked = (node.value === value);\n    }\n\n    setDisabledState(disabled: boolean) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.disabled = disabled;\n    }\n\n    onChange(event: Event) {\n        const node = getContext(this).node as HTMLInputElement;\n        if (node.checked) {\n            this.control.value = node.value;\n        }\n    }\n\n    onBlur(event: FocusEvent) {\n        this.control.touched = true;\n    }\n\n    static meta: IFactoryMeta = {\n        selector: 'input[type=radio][formControl],input[type=radio][formControlName]',\n        inputs: ['formControl', 'formControlName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n\n}\n","import { getContext, IFactoryMeta } from 'rxcomp';\nimport FormAbstractCollectionDirective from './form-abstract-collection.directive';\nimport FormAbstractDirective from './form-abstract.directive';\n\n/**\n * FormSelectDirective.\n * @example\n * <select formControlName=\"country\">\n * \t<option value=\"\">select</option>\n * \t<option value=\"en-US\">English</option>\n * \t<option value=\"it-IT\">Italiano</option>\n * </select>\n * @example\n * <select [formControl]=\"control\">\n * \t<option value=\"\">select</option>\n * \t<option value=\"en-US\">English</option>\n * \t<option value=\"it-IT\">Italiano</option>\n * </select>\n */\nexport default class FormSelectDirective extends FormAbstractDirective {\n\n    writeValue(value: any) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.value = value == null ? '' : value;\n    }\n\n    setDisabledState(disabled: boolean) {\n        const node = getContext(this).node as HTMLInputElement;\n        node.disabled = disabled;\n    }\n\n    onChange(event: Event) {\n        const node = getContext(this).node as HTMLInputElement;\n        this.control.value = node.value === '' ? null : node.value;\n    }\n\n    onBlur(event: Event) {\n        this.control.touched = true;\n    }\n\n    static meta: IFactoryMeta = {\n        selector: 'select[formControl],select[formControlName]',\n        inputs: ['formControl', 'formControlName'],\n        hosts: { host: FormAbstractCollectionDirective },\n    };\n}\n","import { Directive, getContext, IFactoryMeta } from 'rxcomp';\nimport { fromEvent, Observable } from 'rxjs';\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\n\n/**\n * FormSubmitDirective.\n * @example\n * <form (submit)=\"onSubmit()\" [formGroup]=\"form\" role=\"form\" novalidate autocomplete=\"off\">\n * \t...\n * </form>\n */\nexport default class FormSubmitDirective extends Directive {\n\n    event?: string;\n    event$?: Observable<Event>;\n\n    onInit() {\n        const { module, node, selector, parentInstance } = getContext(this);\n        const event = this.event = selector.replace(/\\[|\\]|\\(|\\)/g, '');\n        const form = node as HTMLFormElement;\n        const event$ = this.event$ = fromEvent(form, 'submit').pipe(\n            tap(event => {\n                event.preventDefault();\n            }),\n            shareReplay(1)\n        );\n        const expression = node.getAttribute(`(${event})`);\n        if (expression) {\n            const outputFunction = module.makeFunction(expression, ['$event']);\n            event$.pipe(\n                takeUntil(this.unsubscribe$ as Observable<any>) // !!!\n            ).subscribe(event => {\n                module.resolve(outputFunction, parentInstance, event);\n            });\n        } else {\n            (parentInstance as any)[`${event}$`] = event$; // !!! any\n        }\n        // console.log('parentInstance', parentInstance);\n        // console.log('EventDirective.onInit', 'selector', selector, 'event', event);\n    }\n\n    static meta: IFactoryMeta = {\n        selector: `[(submit)]`,\n    };\n\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nexport interface IFormValidationError {\n\t[key: string]: any\n}\n\n/**\n * FormValidator class representing a form validator.\n * @example\n * export function EqualValidator(equal) {\n * \treturn new FormValidator(function(value) {\n * \t\tconst equal = this.params.equal;\n * \t\tif (!value || !equal) {\n * \t\t\treturn null;\n * \t\t}\n * \t\treturn value !== equal ? { equal: { equal: equal, actual: value } } : null;\n * \t}, { equal });\n * }\n */\nexport default class FormValidator {\n\n\tvalidator: (value: any, params?: any) => null | IFormValidationError;\n\tparams$: BehaviorSubject<any>;\n\n\tget params(): any {\n\t\treturn this.params$.getValue();\n\t}\n\n\tset params(params: any) {\n\t\tif (params) {\n\t\t\tconst current = this.params;\n\t\t\tconst differs: boolean = Object.keys(params).reduce((flag: boolean, key: string) => {\n\t\t\t\treturn flag || !current || current[key] !== params[key];\n\t\t\t}, false);\n\t\t\tif (differs) {\n\t\t\t\t// if (JSON.stringify(params) !== JSON.stringify(this.params)) {\n\t\t\t\tthis.params$.next(params);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create a FormValidator.\n\t */\n\tconstructor(validator: (value: any, params?: any) => any, params?: any) {\n\t\tthis.validator = validator;\n\t\tthis.params$ = new BehaviorSubject(params);\n\t}\n\n\t/**\n\t * validate a value\n\t * @param value the value to validate\n\t */\n\tvalidate(value: any): any {\n\t\treturn this.validator(value, this.params);\n\t}\n\n}\n","import FormValidator from './form-validator';\n\n/**\n * a null validator\n */\nexport function NullValidator() {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\treturn null;\n\t});\n}\n\n/**\n * a required validator\n */\nexport function RequiredValidator(): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\t// console.log('RequiredValidator', value, (value == null || value.length === 0) ? { required: true } : null);\n\t\treturn (value == null || value.length === 0) ? { required: true } : null;\n\t});\n\t// return (value == null || value.length === 0) ? 'required' : null;\n}\n\n/**\n * a required and true validator\n */\nexport function RequiredTrueValidator(): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\t// console.log('RequiredTrueValidator', value, value === true ? null : { required: true });\n\t\treturn value === true ? null : { required: true };\n\t});\n}\n\n/**\n * a min number value validator\n */\nexport function MinValidator(min: number): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tconst min = params.min;\n\t\tif (!value || !min) {\n\t\t\treturn null;\n\t\t}\n\t\tvalue = parseFloat(value);\n\t\treturn !isNaN(value) && value < min ? { min: { min: min, actual: value } } : null;\n\t}, { min });\n}\n\n/**\n * a max number value validator\n */\nexport function MaxValidator(max: number): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tconst max = params.max;\n\t\tif (!value || !max) {\n\t\t\treturn null;\n\t\t}\n\t\tvalue = parseFloat(value);\n\t\treturn !isNaN(value) && value > max ? { max: { max: max, actual: value } } : null;\n\t}, { max });\n}\n\n/**\n * a min string length validator\n */\nexport function MinLengthValidator(minlength: number): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tconst minlength = params.minlength;\n\t\tif (!value || !minlength) {\n\t\t\treturn null;\n\t\t}\n\t\tconst length = value ? value.length : 0;\n\t\treturn length < minlength ? { minlength: { requiredLength: minlength, actualLength: length } } : null;\n\t}, { minlength });\n}\n\n/**\n * a max string length validator\n */\nexport function MaxLengthValidator(maxlength: number): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tconst maxlength = params.maxlength;\n\t\tif (!value || !maxlength) {\n\t\t\treturn null;\n\t\t}\n\t\tconst length = value ? value.length : 0;\n\t\treturn length > maxlength ? { minlength: { requiredLength: maxlength, actualLength: length } } : null;\n\t}, { maxlength });\n}\n\n/**\n * a regex pattern validator\n */\nexport function PatternValidator(pattern: string | RegExp): FormValidator {\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tconst pattern = params.pattern;\n\t\tif (!value || !pattern) {\n\t\t\treturn null;\n\t\t}\n\t\tconst regex = patternToRegEx(pattern);\n\t\treturn regex.test(value) ? null : { pattern: { requiredPattern: regex.toString(), actualValue: value } };\n\t}, { pattern });\n}\n\n/**\n * an email pattern validator\n */\nexport function EmailValidator(): FormValidator {\n\tconst regex = /^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\treturn new FormValidator(function (value: any, params?: any) {\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\treturn regex.test(value) ? null : { email: true };\n\t});\n}\n\nfunction patternToRegEx(pattern: string | RegExp): RegExp {\n\tlet regex;\n\tif (pattern instanceof RegExp) {\n\t\tregex = pattern;\n\t} else if (typeof pattern === 'string') {\n\t\tpattern = pattern.charAt(0) === '^' ? pattern : `^${pattern}`;\n\t\tpattern = pattern.charAt(pattern.length - 1) === '$' ? pattern : `${pattern}$`;\n\t\tregex = new RegExp(pattern);\n\t}\n\treturn regex || new RegExp('');\n}\n","import { Directive, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { EmailValidator } from './validators';\n\n/**\n * FormEmailDirective attribute for injecting EmailValidator.\n * @example\n * <input type=\"text\" formControlName=\"email\" email />\n */\nexport default class FormEmailDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n\n    onInit() {\n        // console.log('FormEmailDirective', this.host.control);\n        const validator = this.validator = EmailValidator();\n        if (this.host) {\n            this.host.control.addValidators(validator);\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[email][formControl],[email][formControlName]',\n        inputs: ['email'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, Factory, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { MaxLengthValidator } from './validators';\n// import { EmailValidator, MaxLengthValidator, MaxValidator, MaxLengthValidator, MaxValidator, NullValidator, PatternValidator, RequiredTrueValidator, RequiredValidator } from './form/validators/validators';\n\n/**\n * FormMaxLengthDirective attribute for injecting MaxLengthValidator.\n * @example\n * <input type=\"text\" formControlName=\"card\" maxlength=\"12\" />\n */\nexport default class FormMaxLengthDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n    maxlength: number = Number.POSITIVE_INFINITY;\n\n    onInit() {\n        // console.log('FormMaxLengthDirective.onInit', this.maxlength);\n        this.validator = MaxLengthValidator(this.maxlength);\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        // console.log('FormMaxLengthDirective.onChanges', this.maxlength);\n        if (this.validator) {\n            this.validator.params = { maxlength: this.maxlength };\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[maxlength][formControl],[maxlength][formControlName]',\n        inputs: ['maxlength'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, Factory, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { MaxValidator } from './validators';\n\n/**\n * FormMaxDirective attribute for injecting MaxValidator.\n * @example\n * <input type=\"number\" formControlName=\"qty\" max=\"12\" />\n */\nexport default class FormMaxDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n    max: number = Number.POSITIVE_INFINITY;\n\n    onInit() {\n        // console.log('FormMaxDirective.onInit', this.max);\n        this.validator = MaxValidator(this.max);\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        // console.log('FormMaxDirective.onChanges', this.max);\n        if (this.validator) {\n            this.validator.params = { max: this.max };\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[max][formControl],[max][formControlName]',\n        inputs: ['max'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, Factory, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { MinLengthValidator } from './validators';\n\n/**\n * FormMinLengthDirective attribute for injecting MinLengthValidator.\n * @example\n * <input type=\"text\" formControlName=\"card\" minlength=\"12\" />\n */\nexport default class FormMinLengthDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n    minlength: number = Number.NEGATIVE_INFINITY;\n\n    onInit() {\n        // console.log('FormMinLengthDirective.onInit', this.minlength);\n        this.validator = MinLengthValidator(this.minlength);\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        // console.log('FormMinLengthDirective.onChanges', this.minlength);\n        if (this.validator) {\n            this.validator.params = { minlength: this.minlength };\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[minlength][formControl],[minlength][formControlName]',\n        inputs: ['minlength'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, Factory, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { MinValidator } from './validators';\n\n/**\n * FormMinDirective attribute for injecting MinValidator.\n * @example\n * <input type=\"number\" formControlName=\"qty\" min=\"1\" />\n */\nexport default class FormMinDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n    min: number = Number.NEGATIVE_INFINITY;\n\n    onInit() {\n        // console.log('FormMinDirective.onInit', this.min);\n        this.validator = MinValidator(this.min);\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        // console.log('FormMinDirective.onChanges', this.min);\n        if (this.validator) {\n            this.validator.params = { min: this.min };\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[min][formControl],[min][formControlName]',\n        inputs: ['min'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, Factory, IFactoryMeta } from 'rxcomp';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport FormValidator from './form-validator';\nimport { PatternValidator } from './validators';\n\n/**\n * FormPatternDirective attribute for injecting PatternValidator.\n * @example\n * <input type=\"text\" formControlName=\"visa\" pattern=\"^4[0-9]{12}(?:[0-9]{3})?$\" />\n */\nexport default class FormPatternDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n    pattern?: string | RegExp;\n\n    onInit() {\n        // console.log('FormPatternDirective.onInit', this.pattern);\n        if (this.pattern) {\n            this.validator = PatternValidator(this.pattern);\n            if (this.host) {\n                this.host.control.addValidators(this.validator);\n            }\n        }\n    }\n\n    onChanges(changes: Factory | Window) {\n        // console.log('FormPatternDirective.onChanges', this.pattern);\n        if (this.validator) {\n            this.validator.params = { pattern: this.pattern };\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[pattern][formControl],[pattern][formControlName]',\n        inputs: ['pattern'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, IFactoryMeta } from 'rxcomp';\nimport { FormValidator } from '../../rxcomp-form';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport { RequiredTrueValidator } from './validators';\n\n/**\n * FormRequiredTrueDirective attribute for injecting RequiredTrueValidator.\n * @example\n * <input type=\"checkbox\" formControlName=\"privacy\" requiredTrue />\n */\nexport default class FormRequiredTrueDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n\n    onInit() {\n        // console.log('FormRequiredTrueDirective', this.host.control);\n        this.validator = RequiredTrueValidator();\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[requiredTrue][formControl],[requiredTrue][formControlName]',\n        inputs: ['requiredTrue'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Directive, IFactoryMeta } from 'rxcomp';\nimport { FormValidator } from '../../rxcomp-form';\nimport FormAbstractDirective from '../directives/form-abstract.directive';\nimport { RequiredValidator } from './validators';\n\n/**\n * FormRequiredDirective attribute for injecting RequiredValidator.\n * @example\n * <input type=\"text\" formControlName=\"firstName\" required />\n */\nexport default class FormRequiredDirective extends Directive {\n\n    validator?: FormValidator;\n    host?: FormAbstractDirective;\n\n    onInit() {\n        // console.log('FormRequiredDirective', this.host.control);\n        this.validator = RequiredValidator();\n        if (this.host) {\n            this.host.control.addValidators(this.validator);\n        }\n    }\n\n    static meta: IFactoryMeta = {\n        selector: '[required][formControl],[required][formControlName]',\n        inputs: ['required'],\n        hosts: { host: FormAbstractDirective },\n    };\n\n}\n","import { Factory, IModuleMeta, Module, Pipe } from 'rxcomp';\nimport FormArrayDirective from './form/directives/form-array.directive';\nimport FormCheckboxDirective from './form/directives/form-checkbox.directive';\nimport FormFieldComponent from './form/directives/form-field.component';\nimport FormGroupDirective from './form/directives/form-group.directive';\nimport FormInputDirective from './form/directives/form-input.directive';\nimport FormPlaceholderDirective from './form/directives/form-placeholder.directive';\nimport FormRadioDirective from './form/directives/form-radio.directive';\nimport FormSelectDirective from './form/directives/form-select.directive';\nimport FormSubmitDirective from './form/directives/form-submit.directive';\nimport FormEmailDirective from './form/validators/form-email.directive';\nimport FormMaxLengthDirective from './form/validators/form-max-length.directive';\nimport FormMaxDirective from './form/validators/form-max.directive';\nimport FormMinLengthDirective from './form/validators/form-min-length.directive';\nimport FormMinDirective from './form/validators/form-min.directive';\nimport FormPatternDirective from './form/validators/form-pattern.directive';\nimport FormRequiredTrueDirective from './form/validators/form-required-true.directive';\nimport FormRequiredDirective from './form/validators/form-required.directive';\n\nconst factories: typeof Factory[] = [\n\tFormArrayDirective,\n\tFormCheckboxDirective,\n\tFormFieldComponent,\n\tFormGroupDirective,\n\tFormInputDirective,\n\tFormPlaceholderDirective,\n\tFormRadioDirective,\n\tFormSelectDirective,\n\tFormSubmitDirective,\n\tFormEmailDirective,\n\tFormMaxDirective,\n\tFormMaxLengthDirective,\n\tFormMinDirective,\n\tFormMinLengthDirective,\n\tFormPatternDirective,\n\tFormRequiredDirective,\n\tFormRequiredTrueDirective,\n];\n\nconst pipes: typeof Pipe[] = [];\n\n/**\n * FormModule Class.\n * @example\n * export default class AppModule extends Module {}\n *\n * AppModule.meta = {\n *  imports: [\n *   CoreModule,\n *   FormModule\n *  ],\n *  declarations: [\n *   ErrorsComponent\n *  ],\n *  bootstrap: AppComponent,\n * };\n * @extends Module\n */\nexport default class FormModule extends Module {\n\n\tstatic meta: IModuleMeta = {\n\t\tdeclarations: [\n\t\t\t...factories,\n\t\t\t...pipes,\n\t\t],\n\t\texports: [\n\t\t\t...factories,\n\t\t\t...pipes,\n\t\t]\n\t};\n\n}\n","enum FormStatus {\n\tPending = 'pending',\n\tValid = 'valid',\n\tInvalid = 'invalid',\n\tDisabled = 'disabled',\n\tHidden = 'hidden',\n};\n\nexport default FormStatus;\n","import { BehaviorSubject, combineLatest, isObservable, merge, Observable, of, ReplaySubject } from \"rxjs\";\nimport { auditTime, distinctUntilChanged, map, shareReplay, skip, switchAll, switchMap, tap } from 'rxjs/operators';\nimport FormStatus from './models/form-status';\nimport FormValidator from \"./validators/form-validator\";\n\n/**\n * Abstract class representing a form control.\n */\nexport default abstract class FormAbstract {\n\n\tpublic errors: any;\n\n\tname?: string;\n\tvalue_: any = undefined;\n\tsubmitted_: boolean = false;\n\ttouched_: boolean = false;\n\tdirty_: boolean = false;\n\tstatus?: FormStatus;\n\n\tvalidators: FormValidator[];\n\n\tprotected valueSubject: BehaviorSubject<any> = new BehaviorSubject(null);\n\tprotected statusSubject: BehaviorSubject<null> = new BehaviorSubject(null);\n\tprotected validatorsSubject: ReplaySubject<Observable<any[]>> = new ReplaySubject<Observable<any[]>>().pipe(\n\t\tswitchAll()\n\t) as ReplaySubject<Observable<any[]>>;\n\tpublic value$: Observable<any> = this.valueSubject.pipe(\n\t\tdistinctUntilChanged(),\n\t\tskip(1),\n\t\ttap(() => {\n\t\t\tthis.submitted_ = false;\n\t\t\tthis.dirty_ = true;\n\t\t\tthis.statusSubject.next(null);\n\t\t}),\n\t\tshareReplay(1)\n\t);\n\tpublic status$: Observable<{ [key: string]: any }> = merge(this.statusSubject, this.validatorsSubject).pipe(\n\t\t// auditTime(1),\n\t\tswitchMap(() => this.validate$(this.value)),\n\t\tshareReplay(1)\n\t);\n\tpublic changes$: Observable<any> = merge(this.value$, this.status$).pipe(\n\t\tmap(() => this.value),\n\t\tauditTime(1),\n\t\tshareReplay(1)\n\t);\n\n\t/**\n\t * Create a FormAbstract.\n\t * @param validators a list of validators.\n\t */\n\tconstructor(validators?: (FormValidator | FormValidator[])) {\n\t\tthis.validators = validators ? (Array.isArray(validators) ? validators : [validators]) : [];\n\t}\n\n\t/**\n\t * initialize subjects\n\t */\n\tprotected initSubjects_(): void {\n\t\tthis.switchValidators_();\n\t}\n\n\tprivate switchValidators_(): void {\n\t\tconst validatorParams: Observable<any>[] = this.validators.map(x => x.params$);\n\t\tlet validatorParams$: Observable<any> = validatorParams.length ? combineLatest(validatorParams) : of(validatorParams);\n\t\tthis.validatorsSubject.next(validatorParams$);\n\t}\n\n\t/**\n\t * initialize observables\n\t */\n\tprotected initObservables_(): void { }\n\n\t/**\n\t * @param value the inner control value\n\t * @return an object with key, value errors\n\t */\n\tvalidate$(value: any): Observable<{ [key: string]: any }> {\n\t\tif (this.status === FormStatus.Disabled || this.status === FormStatus.Hidden || this.submitted_ || !this.validators.length) {\n\t\t\tthis.errors = {};\n\t\t\tif (this.status === FormStatus.Invalid) {\n\t\t\t\tthis.status = FormStatus.Valid;\n\t\t\t}\n\t\t\treturn of(this.errors);\n\t\t} else {\n\t\t\treturn combineLatest(this.validators.map(x => {\n\t\t\t\tlet result$ = x.validate(value);\n\t\t\t\treturn isObservable(result$) ? result$ : of(result$);\n\t\t\t})).pipe(\n\t\t\t\tmap(results => {\n\t\t\t\t\tthis.errors = Object.assign({}, ...results);\n\t\t\t\t\tthis.status = Object.keys(this.errors).length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t\t\t\treturn this.errors;\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @return the pending status\n\t */\n\tget pending(): boolean { return this.status === FormStatus.Pending; }\n\n\t/**\n\t * @return the valid status\n\t */\n\tget valid(): boolean { return this.status !== FormStatus.Invalid; }\n\n\t/**\n\t * @return the invalid status\n\t */\n\tget invalid(): boolean { return this.status === FormStatus.Invalid; }\n\n\t/**\n\t * @return the disabled status\n\t */\n\tget disabled(): boolean { return this.status === FormStatus.Disabled; }\n\n\t/**\n\t * @return the enabled status\n\t */\n\tget enabled(): boolean { return this.status !== FormStatus.Disabled; }\n\n\t/**\n\t * @return the hidden status\n\t */\n\tget hidden(): boolean { return this.status === FormStatus.Hidden; }\n\n\t/**\n\t * @return the visible status\n\t */\n\tget visible(): boolean { return this.status !== FormStatus.Hidden; }\n\n\t/**\n\t * @return the submitted status\n\t */\n\tget submitted(): boolean { return this.submitted_; }\n\n\t/**\n\t * @return the dirty status\n\t */\n\tget dirty(): boolean { return this.dirty_; }\n\n\t/**\n\t * @return the pristine status\n\t */\n\tget pristine(): boolean { return !this.dirty_; }\n\n\t/**\n\t * @return the touched status\n\t */\n\tget touched(): boolean { return this.touched_; }\n\n\t/**\n\t * @return the untouched status\n\t */\n\tget untouched(): boolean { return !this.touched_; }\n\n\t/**\n\t * @param disabled the disabled state\n\t */\n\tset disabled(disabled: boolean) {\n\t\tif (disabled) {\n\t\t\tif (this.status !== FormStatus.Disabled) {\n\t\t\t\tthis.status = FormStatus.Disabled;\n\t\t\t\t// this.value_ = null;\n\t\t\t\tthis.dirty_ = false;\n\t\t\t\tthis.touched_ = false;\n\t\t\t\tthis.submitted_ = false;\n\t\t\t\tthis.statusSubject.next(null);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.status === FormStatus.Disabled) {\n\t\t\t\tthis.status = FormStatus.Pending;\n\t\t\t\t// this.value_ = null;\n\t\t\t\tthis.dirty_ = false;\n\t\t\t\tthis.touched_ = false;\n\t\t\t\tthis.submitted_ = false;\n\t\t\t\tthis.statusSubject.next(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tget flags(): { [key: string]: boolean } {\n\t\treturn {\n\t\t\tuntouched: this.untouched,\n\t\t\ttouched: this.touched,\n\t\t\tpristine: this.pristine,\n\t\t\tdirty: this.dirty,\n\t\t\tpending: this.pending,\n\t\t\tenabled: this.enabled,\n\t\t\tdisabled: this.disabled,\n\t\t\thidden: this.hidden,\n\t\t\tvisible: this.visible,\n\t\t\tvalid: this.valid,\n\t\t\tinvalid: this.invalid,\n\t\t\tsubmitted: this.submitted\n\t\t}\n\t}\n\n\t/**\n\t * @param hidden the hidden state\n\t */\n\tset hidden(hidden: boolean) {\n\t\tif (hidden) {\n\t\t\tif (this.status !== FormStatus.Hidden) {\n\t\t\t\tthis.status = FormStatus.Hidden;\n\t\t\t\t// this.value_ = null;\n\t\t\t\tthis.dirty_ = false;\n\t\t\t\tthis.touched_ = false;\n\t\t\t\tthis.submitted_ = false;\n\t\t\t\tthis.statusSubject.next(null);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.status === FormStatus.Hidden) {\n\t\t\t\tthis.status = FormStatus.Pending;\n\t\t\t\t// this.value_ = null;\n\t\t\t\tthis.dirty_ = false;\n\t\t\t\tthis.touched_ = false;\n\t\t\t\tthis.submitted_ = false;\n\t\t\t\tthis.statusSubject.next(null);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param submitted the submitted state\n\t */\n\tset submitted(submitted: boolean) {\n\t\tthis.submitted_ = submitted;\n\t\tthis.statusSubject.next(null);\n\t}\n\n\t/**\n\t * @param touched the touched state\n\t */\n\tset touched(touched: boolean) {\n\t\tthis.touched_ = touched;\n\t\tthis.statusSubject.next(null);\n\t}\n\n\t/**\n\t * @return inner value of the control\n\t */\n\tget value(): any { return this.value_; }\n\n\t/**\n\t * @param value a value\n\t */\n\tset value(value: any) {\n\t\tthis.value_ = value;\n\t\tthis.valueSubject.next(value);\n\t}\n\n\t/**\n\t * @param status optional FormStatus\n\t */\n\treset(status?: FormStatus): void {\n\t\tthis.status = status || FormStatus.Pending;\n\t\tthis.value_ = null;\n\t\tthis.dirty_ = false;\n\t\tthis.touched_ = false;\n\t\tthis.submitted_ = false;\n\t\tthis.statusSubject.next(null);\n\t}\n\n\t/**\n\t * @param value a value\n\t */\n\tpatch(value: any): void {\n\t\tthis.value_ = value;\n\t\tthis.dirty_ = true;\n\t\tthis.submitted_ = false;\n\t\tthis.statusSubject.next(null);\n\t}\n\n\t/**\n\t * adds one or more FormValidator.\n\t * @param validators a list of validators.\n\t */\n\taddValidators(...validators: FormValidator[]): void {\n\t\tthis.validators.push(...validators);\n\t\tthis.switchValidators_();\n\t}\n\n\t/**\n\t * replace one or more FormValidator.\n\t * @param validators a list of validators.\n\t */\n\treplaceValidators(...validators: FormValidator[]): void {\n\t\tthis.validators = validators;\n\t\tthis.switchValidators_();\n\t}\n\n\t/**\n\t * remove all FormValidator.\n\t */\n\tclearValidators(): void {\n\t\tthis.validators = [];\n\t\tthis.switchValidators_();\n\t}\n\n}\n","import FormAbstract from \"./form-abstract\";\nimport FormStatus from './models/form-status';\nimport FormValidator from \"./validators/form-validator\";\n\n/**\n * Class representing a FormControl.\n */\nexport default class FormControl extends FormAbstract {\n\n\t/**\n\t * Create a FormControl.\n\t * @example\n\t * const form = new FormControl(null);\n\t *\n\t * form.changes$.subscribe(changes => {\n\t * \tconsole.log(changes);\n\t * });\n\t * @param value The value of the control.\n\t * @param validators a list of validators.\n\t */\n\tconstructor(value: any = null, validators?: FormValidator | FormValidator[]) {\n\t\tsuper(validators);\n\t\tthis.value_ = value;\n\t\tthis.status = FormStatus.Pending;\n\t\tthis.errors = {};\n\t\tthis.initSubjects_();\n\t\tthis.initObservables_();\n\t\tthis.statusSubject.next(null);\n\t}\n\n}\n\n/** Shortcut for new FormControl. */\nexport function formControl(value: any = null, validators?: FormValidator | FormValidator[]) {\n\treturn new FormControl(value, validators);\n}\n","import { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchAll } from 'rxjs/operators';\nimport FormAbstract from './form-abstract';\nimport FormControl from './form-control';\nimport FormStatus from './models/form-status';\nimport FormValidator from './validators/form-validator';\n\n/**\n * Abstract class representing a form collection.\n */\nexport default class FormAbstractCollection extends FormAbstract {\n\n\tcontrols: any;\n\tchangesChildren: BehaviorSubject<any> = new BehaviorSubject<any>(undefined);\n\n\t/**\n\t * Create a FormAbstract.\n\t * @param controls an object containing controls.\n\t * @param validators a list of validators.\n\t */\n\tconstructor(controls?: any, validators?: (FormValidator | FormValidator[])) {\n\t\tsuper(validators);\n\t\tthis.controls = controls;\n\t\tthis.initControls_();\n\t\tthis.initSubjects_();\n\t\tthis.initObservables_();\n\t}\n\n\tinitControl_(controlOrValue: FormAbstract | any, key: any): FormControl {\n\t\tconst control: FormControl = controlOrValue instanceof FormAbstract ? controlOrValue : new FormControl(controlOrValue);\n\t\tcontrol.addValidators(...this.validators);\n\t\tcontrol.name = key;\n\t\treturn control;\n\t}\n\n\tprivate initControls_(): { [key: string]: FormControl } {\n\t\tthis.forEach_((control: FormAbstract, key: any) => {\n\t\t\tthis.init(control, key);\n\t\t});\n\t\treturn this.controls;\n\t}\n\n\tprotected initSubjects_(): void {\n\t\tthis.changesChildren = this.changesChildren.pipe(\n\t\t\tswitchAll()\n\t\t) as BehaviorSubject<Observable<any>>;\n\t\tthis.switchSubjects_();\n\t}\n\n\tprotected switchSubjects_(): void {\n\t\tconst changesChildren = this.reduce_((result: Observable<any>[], control: FormAbstract) => {\n\t\t\tresult.push(control.changes$);\n\t\t\treturn result;\n\t\t}, []);\n\t\tlet changesChildren$ = changesChildren.length ? combineLatest(changesChildren) : of(changesChildren);\n\t\tthis.changesChildren.next(changesChildren$);\n\t}\n\n\tprotected initObservables_(): void {\n\t\tthis.changes$ = this.changesChildren.pipe(\n\t\t\tmap(() => this.value),\n\t\t\tshareReplay(1)\n\t\t);\n\t}\n\n\tvalidate(value: any): any[] {\n\t\tlet errors;\n\t\tif (this.status === FormStatus.Disabled || this.status === FormStatus.Hidden) {\n\t\t\t// this.errors = {};\n\t\t\terrors = [];\n\t\t} else {\n\t\t\t// this.errors = Object.assign({}, ...this.validators.map(x => x(value)));\n\t\t\t// this.status = Object.keys(this.errors).length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t\tlet errors_ = this.validators.map(x => x.validate(value)).filter(x => x !== null);\n\t\t\terrors = this.reduce_((result: any[], control: FormAbstract) => {\n\t\t\t\treturn result.concat(control.errors);\n\t\t\t}, errors_);\n\t\t\tthis.status = errors.length === 0 ? FormStatus.Valid : FormStatus.Invalid;\n\t\t}\n\t\treturn errors;\n\t}\n\n\tprotected forEach_(callback: Function): void {\n\t\tObject.keys(this.controls).forEach(key => callback(this.controls[key], key));\n\t}\n\n\tprotected reduce_(callback: Function, result: any): any {\n\t\tthis.forEach_((control: FormAbstract, key: any) => {\n\t\t\tresult = callback(result, control, key);\n\t\t});\n\t\treturn result;\n\t}\n\n\tprotected all_(key: (keyof FormAbstract), value: any): boolean {\n\t\treturn this.reduce_((result: boolean, control: FormAbstract) => {\n\t\t\treturn result && control[key] === value;\n\t\t}, true);\n\t}\n\n\tprotected any_(key: (keyof FormAbstract), value: any): boolean {\n\t\treturn this.reduce_((result: boolean, control: FormAbstract) => {\n\t\t\treturn result || control[key] === value;\n\t\t}, false);\n\t}\n\n\tget valid(): boolean { return this.all_('valid', true); }\n\tget invalid(): boolean { return this.any_('invalid', true); }\n\tget pending(): boolean { return this.any_('pending', true); }\n\tget disabled(): boolean { return this.all_('disabled', true); }\n\tget enabled(): boolean { return this.any_('enabled', true); }\n\tget hidden(): boolean { return this.all_('hidden', true); }\n\tget visible(): boolean { return this.any_('visible', true); }\n\tget submitted(): boolean { return this.all_('submitted', true); }\n\tget dirty(): boolean { return this.any_('dirty', true); }\n\tget pristine(): boolean { return this.all_('pristine', true); }\n\tget touched(): boolean { return this.all_('touched', true); }\n\tget untouched(): boolean { return this.any_('untouched', true); }\n\n\tset disabled(disabled: boolean) {\n\t\tthis.forEach_((control: FormAbstract) => {\n\t\t\tcontrol.disabled = disabled;\n\t\t});\n\t}\n\n\tset hidden(hidden: boolean) {\n\t\tthis.forEach_((control: FormAbstract) => {\n\t\t\tcontrol.hidden = hidden;\n\t\t});\n\t}\n\n\tset submitted(submitted: boolean) {\n\t\tthis.forEach_((control: FormAbstract) => {\n\t\t\tcontrol.submitted = submitted;\n\t\t});\n\t}\n\n\tset touched(touched: boolean) {\n\t\tthis.forEach_((control: FormAbstract) => {\n\t\t\tcontrol.touched = touched;\n\t\t});\n\t}\n\n\tget value(): { [key: string]: any } {\n\t\treturn this.reduce_((result: { [key: string]: any }, control: FormAbstract, key: string) => {\n\t\t\tresult[key] = control.value;\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\tset value(value: { [key: string]: any }) {\n\t\tthis.forEach_((control: FormAbstract, key: string) => {\n\t\t\tcontrol.value = value[key];\n\t\t});\n\t}\n\n\tget errors(): { [key: string]: any } {\n\t\treturn this.reduce_((result: { [key: string]: any }, control: FormAbstract) => {\n\t\t\treturn Object.assign(result, control.errors);\n\t\t}, {});\n\t}\n\n\treset(): void {\n\t\tthis.forEach_((control: FormAbstract) => control.reset());\n\t}\n\n\tpatch(value: { [key: string]: any }): void {\n\t\tif (value) {\n\t\t\tthis.forEach_((control: FormAbstract, key: string) => {\n\t\t\t\tif (value[key] != undefined) { // !!! keep != loose inequality\n\t\t\t\t\tcontrol.patch(value[key]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected init(control: FormAbstract, key: any): void {\n\t\tthis.controls[key] = this.initControl_(control, key);\n\t}\n\n\tget(key: any): FormAbstract {\n\t\treturn this.controls[key];\n\t}\n\n\tset(control: FormAbstract, key: any): void {\n\t\tdelete (this.controls[key]);\n\t\tthis.controls[key] = this.initControl_(control, key);\n\t\tthis.switchSubjects_();\n\t}\n\n\t// !!! needed?\n\tadd(control: FormAbstract, key: any): void {\n\t\tthis.controls[key] = this.initControl_(control, key);\n\t\tthis.switchSubjects_();\n\t}\n\n\tremove(control: FormAbstract): void {\n\t\tconst key = Object.keys(this.controls).find((key: string) => this.controls[key] === control ? key : null);\n\t\tif (key) {\n\t\t\tthis.removeKey(key);\n\t\t}\n\t}\n\n\tremoveKey(key: any): void {\n\t\tconst exhist: boolean = this.controls[key] !== undefined;\n\t\tdelete (this.controls[key]);\n\t\tif (exhist) {\n\t\t\tthis.switchSubjects_();\n\t\t}\n\t}\n\n\t/**\n\t * adds one or more FormValidator.\n\t * @param validators a list of validators.\n\t */\n\taddValidators(...validators: FormValidator[]): void {\n\t\tthis.forEach_((control: FormAbstract) => control.addValidators(...validators));\n\t}\n\n\t/**\n\t * replace one or more FormValidator.\n\t * @param validators a list of validators.\n\t */\n\treplaceValidators(...validators: FormValidator[]): void {\n\t\tthis.forEach_((control: FormAbstract) => control.replaceValidators(...validators));\n\t}\n\n\t/**\n\t * remove all FormValidator.\n\t */\n\tclearValidators(): void {\n\t\tthis.forEach_((control: FormAbstract) => control.clearValidators());\n\t}\n\n}\n","import FormAbstract from './form-abstract';\nimport FormAbstractCollection from './form-abstract-collection';\nimport FormValidator from './validators/form-validator';\n\n/**\n * Class representing a FormArray.\n */\nexport default class FormArray extends FormAbstractCollection {\n\n\t/**\n\t * Create a FormArray.\n\t * @example\n\t * const form = new FormArray([null, null, null]);\n\t *\n\t * form.changes$.subscribe(changes => {\n\t * \tconsole.log(changes);\n\t * });\n\t * @param controls an array containing controls.\n\t * @param validators a list of validators.\n\t */\n\tconstructor(controls: (FormAbstract | any)[] = [], validators?: (FormValidator | FormValidator[])) {\n\t\tsuper(controls, validators);\n\t}\n\n\tforEach_(callback: (control: FormAbstract, key: number) => any) {\n\t\tthis.controls.forEach((control: FormAbstract, key: number) => callback(control, key));\n\t}\n\n\tget value(): any[] {\n\t\treturn this.reduce_((result: any[], control: FormAbstract, key: number) => {\n\t\t\tresult[key] = control.value;\n\t\t\treturn result;\n\t\t}, []); // init as array\n\t}\n\n\tget length(): number {\n\t\treturn this.controls.length;\n\t}\n\n\tprotected init(control: FormAbstract, key: number): void {\n\t\tthis.controls.length = Math.max(this.controls.length, key);\n\t\tthis.controls[key] = this.initControl_(control, key);\n\t}\n\n\tset(control: FormAbstract, key: number): void {\n\t\t// this.controls.length = Math.max(this.controls.length, key);\n\t\t// this.controls[key] = this.initControl_(control);\n\t\tthis.controls.splice(key, 1, this.initControl_(control, key));\n\t\tthis.switchSubjects_();\n\t}\n\n\tadd(control: FormAbstract, key: number): void {\n\t\tthis.controls.length = Math.max(this.controls.length, key);\n\t\tthis.controls[key] = this.initControl_(control, key);\n\t\tthis.switchSubjects_();\n\t}\n\n\tpush(control: FormAbstract): void {\n\t\t// this.controls.length = Math.max(this.controls.length, key);\n\t\t// this.controls[key] = this.initControl_(control);\n\t\tthis.controls.push(this.initControl_(control, this.controls.length));\n\t\tthis.switchSubjects_();\n\t}\n\n\tinsert(control: FormAbstract, key: number): void {\n\t\tthis.controls.splice(key, 0, this.initControl_(control, key));\n\t\tthis.switchSubjects_();\n\t}\n\n\tremove(control: FormAbstract): void {\n\t\tconst key: number = this.controls.indexOf(control);\n\t\tif (key !== -1) {\n\t\t\tthis.removeKey(key);\n\t\t}\n\t}\n\n\tremoveKey(key: number): void {\n\t\tif (this.controls.length > key) {\n\t\t\tthis.controls.splice(key, 1);\n\t\t\tthis.switchSubjects_();\n\t\t}\n\t}\n\n\tat(key: number) {\n\t\treturn this.controls[key];\n\t}\n\n}\n\n/**\n * Shortcut for new FormArray\n */\nexport function formArray(controls: (FormAbstract | any)[] = [], validators?: FormValidator | FormValidator[]) {\n\treturn new FormArray(controls, validators);\n}\n","import FormAbstract from './form-abstract';\nimport FormAbstractCollection from './form-abstract-collection';\nimport FormValidator from './validators/form-validator';\n\n/**\n * Class representing a FormGroup.\n */\nexport default class FormGroup extends FormAbstractCollection {\n\n\t/**\n\t * Create a FormControl.\n\t * @example\n\t * const form = new FormGroup({\n\t * \tfirstName: null,\n\t *  lastName: null,\n\t * });\n\t *\n\t * form.changes$.subscribe(changes => {\n\t * \tconsole.log(changes);\n\t * });\n\t * @param controls an object containing controls.\n\t * @param validators a list of validators.\n\t */\n\tconstructor(controls: { [key: string]: FormAbstract | any } = {}, validators?: FormValidator | FormValidator[]) {\n\t\tsuper(controls, validators);\n\t}\n\n}\n\n/**\n * Shortcut for new FormGroup\n */\nexport function formGroup(controls: { [key: string]: FormAbstract | any } = {}, validators?: FormValidator | FormValidator[]) {\n\treturn new FormGroup(controls, validators);\n}\n"]}